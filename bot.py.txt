from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import Application, CommandHandler, ContextTypes, MessageHandler, filters

# توکن رباتت رو اینجا بذار
TOKEN = "8420390679:AAFPVWlS826ibp5wecd0IQg2afbosoTBSNU"

# دکمه‌های منوی اصلی
main_menu = [
    ["📚 آزمون‌ساز", "📂 فایل‌ها"],
    ["💳 خرید", "🛠 پشتیبانی"]
]

# وقتی کاربر /start بزنه
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = ReplyKeyboardMarkup(main_menu, resize_keyboard=True)
    await update.message.reply_text("سلام 👋 به منوی اصلی خوش اومدی:", reply_markup=keyboard)

# وقتی یکی از دکمه‌ها رو بزنه
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text

    if text == "📚 آزمون‌ساز":
        await update.message.reply_text("اینجا بخش آزمون‌ساز هست ✅")
    elif text == "📂 فایل‌ها":
        await update.message.reply_text("اینجا می‌تونی فایل‌هات رو مدیریت کنی 📂")
    elif text == "💳 خرید":
        await update.message.reply_text("برای خرید به درگاه وصلت می‌کنم 💳")
    elif text == "🛠 پشتیبانی":
        await update.message.reply_text("بخش پشتیبانی فعال شد 🛠")
    else:
        await update.message.reply_text("منوی اصلی رو استفاده کن ⬆️")

def main():
    app = Application.builder().token(TOKEN).build()

    # دستور /start
    app.add_handler(CommandHandler("start", start))

    # واکنش به پیام‌های کاربر (دکمه‌ها)
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

    app.run_polling()

if __name__ == "__main__":
    main()
